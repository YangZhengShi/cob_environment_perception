<?xml version="1.0"?>
<launch>
  <!-- start environment modelling -->
  <arg name="mapping_manager" value="mapping_manager"/>
  <arg name="bag_file" default="/share/goa-sf/pcd_data/bags/tum_set/rgbd_dataset_freiburg2_coke-points.bag"/>
  <!--node launch-prefix="gdb -ex run -_-args" pkg="nodelet" type="nodelet" name="$(arg mapping_manager)"
        args="manager" output="screen"/-->
  <node pkg="nodelet" type="nodelet" name="$(arg mapping_manager)" args="manager" output="screen"/>

  <!--include file="$(find cob_3d_mapping_point_map)/ros/launch/point_map.launch">
    <arg name="start_manager" value="false"/>
    <arg name="nodelet_manager" value="$(arg mapping_manager)"/>
  </include-->
  <!--include file="$(find cob_3d_mapping_features)/ros/launch/extract_planes.launch">
	<arg name="start_manager" value="false"/>
	<arg name="nodelet_manager" value="$(arg mapping_manager)"/>
  </include-->
  <node pkg="nodelet" type="nodelet" name="segmentation"
        args="load cob_3d_segmentation/SegmentationAllInOneNodelet $(arg mapping_manager)" output="screen">
    <remap from="cloud_in" to="registration/pc_aligned" />
    <param name="centroid_passthrough" type="double" value="3.0"/>
  </node>

  <!--node pkg="nodelet" type="nodelet" name="point_map"
        args="load cob_3d_mapping_point_map/PointMapNodelet $(arg mapping_manager)" output="screen">
    <remap from="point_cloud2" to="registration/pc_aligned" />
    <remap from="map" to="point/map" />

    <param name="save" type="bool" value="false" />
    <param name="voxel_leafsize" type="double" value="0.02" />
    <param name="map_frame_id" type="string" value="/map" />
  </node>
  <!--node pkg="nodelet" type="nodelet" name="passthrough"
        args="load pcl/PassThrough $(arg mapping_manager)" output="screen">
    <remap from="passthrough/input" to="point/map" />
    <remap from="passthrough/output" to="point/map_filtered" />

    <param name="filter_field_name" type="string" value="z" />
    <param name="filter_limit_min" type="double" value="0.1" />
    <param name="filter_limit_max" type="double" value="5.0" />
  </node-->
  <!--include file="$(find cob_3d_mapping_geometry_map)/ros/launch/geometry_map.launch"/-->

  <node pkg="rosbag" type="play" name="rosbag_play" cwd="node" respawn="false" output="screen"
        args="$(arg bag_file) -k -q --pause">
    <remap from="/camera/rgb/points" to="/registration/pc_aligned"/>
  </node>
</launch>

